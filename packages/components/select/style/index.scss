@use "sass:map";

@use "../../_styles/common/util" as *;
@use "../../_styles/core/config" as *;
@use "../../_styles/core/mixins" as *;
@use "../../_styles/common/var" as *;
@use "../../_styles/core/css-var" as *;
@use "../../_styles/core/function" as *;

@include b(select) {
  @include set-component-css-var("select", $select);
}

@include b(select) {
  position: relative;
  line-height: map.get($common-component-size, "default");
  cursor: pointer;

  @each $size in (large, small) {
    @include m($size) {
      line-height: map.get($common-component-size, $size);
    }
  }

  // 自定义触发器
  @include m(custom) {
    position: relative;
    line-height: normal;
  }

  @include e(arrow) {
    color: rgba(0, 0, 0, 0.25);
    font-size: 16px;
    height: 16px;
    width: 16px;
    transform: rotate(180deg);
    transition: transform 0.2s;
  }

  @include e(clear) {
    cursor: pointer;
    color: getCssVar("select-clear-icon-color");
    font-size: 14px;
  }

  &:hover {
    .#{$namespace}-input {
      border-color: getCssVar("select-hover-border-color");
    }
  }
  // 修改input样式
  .#{$namespace}-input {
    border-radius: getCssVar("select-border-radius");
    background-color: getCssVar("select-bg-color");

    .#{$namespace}-input__inner {
      color: getCssVar("select-text-color");
      &::placeholder {
        color: getCssVarWithDefault("select-placeholder-color", map.get($select, "placeholder-color"));
      }
    }
    // 如果输入框获取焦点，给后缀图标旋转下
    &.is-focus {
      .#{$namespace}-select__arrow {
        transform: rotate(0);
      }
    }
    &.is-disabled {
      @include set-css-var-value("select-hover-border-color", getCssVar("color-info", "light-6"));
      background-color: getCssVar("select-disabled-bg-color");
    }
  }
}

// 下拉菜单样式
@include b(select-dropdown) {
  @include set-component-css-var("select-dropdown", $select-dropdown);
}

@include b(select-dropdown) {
  position: absolute;
  .dropdown__wrap {
    overflow-y: auto;
    max-height: getCssVar("select-dropdown", "max-height");
    border-radius: getCssVar("select-dropdown", "border-radius");
    border: 1px solid getCssVar("select-dropdown", "border-color");
    background: getCssVar("select-dropdown", "bg-color");
    box-shadow:
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 9px 28px 8px rgba(0, 0, 0, 0.05);
    overflow-x: hidden;
    @include scrollbarStyle();
  }
  .dropdown__list {
    padding: 4px;
  }
  .dropdown__item {
    display: inline-flex;
    width: 100%;
    height: getCssVar("select-dropdown", "item-height");
    padding: 0 8px;
    cursor: pointer;
    align-items: center;
    color: rgba(0, 0, 0, 0.85);
    font-size: 14px;
    @include noSelect();

    &:hover {
      border-radius: 4px;
      color: getCssVar("select-dropdown", "item-hover-color");
      background: getCssVar("select-dropdown", "item-hover-bgcolor");
    }

    // 选择时
    &.selected {
      color: getCssVar("select-dropdown", "selected-text-color");
    }
    // 禁用时
    &.disabled {
      cursor: not-allowed;
      color: getCssVar("select-dropdown", "item-disabled-text-color");
      &:hover {
        background: transparent;
      }
    }
  }
}
